#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>

#define MAX_N 100000

typedef long long ll;

ll stack[MAX_N + 1];
int t;

void push(ll data)
{
    stack[t++] = data;
}

bool empty(void)
{
    return (t == 0);
}

ll top(void)
{
    return stack[t - 1];
}

void pop(void)
{
    t--;
}

ll h[MAX_N + 1];

int main(void)
{
    int n;
    ll i, j, w;
    scanf("%d", &n);
    for(i = 0;i < n;++i)
        scanf("%lld", &h[i]);
    h[n] = 0LL;
    ll ans = 0LL;
    t = 0;
    for(i = 0;i < n + 1;++i)
    {
        while(!empty() && h[top()] >= h[i])
        {
            j = top();
            pop();
            w = -1;
            if(empty())
                w = i;
            else
                w = (i - top() - 1);
            if(ans < h[j] * w)
                ans = h[j] * w;
        }
        push(i);
    }
    printf("%lld\n", ans);
    return 0;
}
